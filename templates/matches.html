{% extends "base.html" %}

{% block content %}
<div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem;">
    <div>
        <div class="card">
            <h3>Add New Match</h3>
            <form method="POST" action="{{ url_for('add_match') }}">
                <div>
                    <label for="date"
                        style="display: block; margin-bottom: 0.5rem; color: var(--text-muted);">Date</label>
                    <input type="date" id="date" name="date" required>
                </div>
                <div>
                    <label for="opponent"
                        style="display: block; margin-bottom: 0.5rem; color: var(--text-muted);">Opponent</label>
                    <input type="text" id="opponent" name="opponent" required>
                </div>
                <div>
                    <label for="venue"
                        style="display: block; margin-bottom: 0.5rem; color: var(--text-muted);">Venue</label>
                    <input type="text" id="venue" name="venue" required>
                </div>
                <div>
                    <label for="result"
                        style="display: block; margin-bottom: 0.5rem; color: var(--text-muted);">Result</label>
                    <select id="result" name="result" required>
                        <option value="Pending">Pending</option>
                        <option value="Won">Won</option>
                        <option value="Lost">Lost</option>
                        <option value="Drawn">Drawn</option>
                        <option value="Tied">Tied</option>
                    </select>
                </div>
                <button type="submit">Add Match</button>
            </form>
        </div>
    </div>

    <div>
        <div class="card">
            <h3>Match List</h3>
            {% if matches %}
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Opponent</th>
                        <th>Venue</th>
                        <th>Result</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for match in matches %}
                    <tr>
                        <td>{{ match.date }}</td>
                        <td style="font-weight: 600;">{{ match.opponent }}</td>
                        <td>{{ match.venue }}</td>
                        <td>
                            <span class="badge badge-{{ match.result|lower }}">
                                {{ match.result }}
                            </span>
                        </td>
                        <td>
                            <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                                <a href="{{ url_for('match_performance', match_id=match['_id']) }}" class="btn-primary"
                                    style="text-decoration: none; display: inline-block; text-align: center; flex: 1;">
                                    Manage Performances
                                </a>
                                <form action="{{ url_for('delete_match', match_id=match['_id']) }}" method="POST"
                                    onsubmit="return confirm('Are you sure you want to delete this match? This will revert all player stats associated with it.');"
                                    style="margin: 0;">
                                    <button type="submit" class="btn-secondary"
                                        style="background-color: #ef4444; color: white; border: none; padding: 0.5rem 1rem; cursor: pointer;">Delete</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p style="color: var(--text-muted); text-align: center; padding: 2rem;">No matches added yet.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}